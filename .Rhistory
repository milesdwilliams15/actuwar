rm(list = c("llplot"))
rm(list = ls())
devtools::document()
?ibm
?llplot
## Setup ----
# devtools::install_github("milesdwilliams15/actuwar")
library(actuwar)
ibm(
outcome = fat,
mu = ~ pop + mil + maj + dem + post1950,
alpha = ~ pop + mil + maj + dem + post1950,
theta = ~ pop + mil + maj + dem + post1950,
data = wars,
its = 200
) -> ft
llplot(wars, fat)
rm(list = ls())
devtools::document()
llplot(wars, fat)
llplot(wars, fat) +
labs(
x = "Battle Deaths"
)
## can I run in parallel?
library(furrr)
cores <- availableCores() - 1
plan(multisession, workers = cores)
ibm(
outcome = fat,
mu = ~ pop + mil + maj + dem + post1950,
alpha = ~ pop + mil + maj + dem + post1950,
theta = ~ pop + mil + maj + dem + post1950,
data = wars,
its = 200
) -> ft
ibm(
outcome = fat,
mu = ~ pop + mil + maj + dem + post1950,
alpha = ~ pop + mil + maj + dem + post1950,
theta = ~ pop + mil + maj + dem + post1950,
data = wars,
its = 2000
) -> ft
ft$out
devtools::document()
llplot(wars, fat)
wars |>
source("~/My R Packages/actuwar/actuwar/data-raw/wars.R", echo=TRUE)
source("~/My R Packages/actuwar/actuwar/data-raw/wars.R", echo=TRUE)
devtools::document()
llplot(wars, fat, by = post1950)
llplot(wars, fat, by = post1950) + ggplot2::theme(legend.position = c(.8,.8))
llplot(wars, fat, by = post1950) + ggplot2::theme(legend.position = c(.8,.75))
llplot(wars, fat, by = post1950, show_fit = T) + ggplot2::theme(legend.position = c(.8,.75))
library(furrr)
cores <- availableCores() - 1
plan(multisession, workers = cores)
## estimate the model
ibm(
outcome = fat,
mu = ~ log(pop) + maj + dem,
alpha = ~ log(pop) + maj + dem,
theta = ~ log(pop) + maj + dem,
data = wars,
its = 200
) -> model_fit
model_fit$out
ibm_sim(
model_fit,
its = 1000,
newdata = data.frame(
pop = mean(wars$pop),
maj = 0:1,
dem = mean(wars$dem)
)
) -> sim_data
sim_data
llplot(
sim_data,
pred,
by = ifelse(maj == 1, "Yes", "No")
)
ibm_sim(
model_fit,
its = 1000,
newdata = data.frame(
pop = mean(wars$pop),
maj = mean(wars$maj),
dem = c(-10, 0, 10)
)
) -> sim_data
llplot(
sim_data,
pred,
by = dplyr::case_when(
dem == -10 ~ "Autocracies",
dem == 0 ~ "Anocracies",
dem == 10 ~ "Democracies"
)
)
llplot(
sim_data,
pred,
by = dem
)
llplot(
sim_data,
pred,
by = dem
) +
ggplot2::scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend"
)
llplot(
sim_data,
pred,
by = dem
) +
ggplot2::scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-10, 0, 10)
)
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-10, 0, 10)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.2, .2)
)
ibm_sim(
model_fit,
its = 1000,
newdata = data.frame(
pop = mean(wars$pop),
maj = mean(wars$maj),
dem = c(-5, 0, 5)
)
) -> sim_data
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-10, 0, 10)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.3, .3)
)
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-5, 0, 5)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.25, .25)
)
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-5, 0, 5)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.25, .25),
legend.direction = "horizontal",
legend.title = "top"
)
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-5, 0, 5)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.25, .25),
legend.direction = "horizontal",
legend.title.position = "top"
)
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-5, 0, 5)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.25, .25)
)
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-5, 0, 5)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.25, .25),
legend.title = element_text(size = 5)
)
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-5, 0, 5)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.2, .25),
legend.title = element_text(size = 6)
)
llplot(
sim_data,
pred,
by = dem
) +
scale_color_gradient2(
low = "red",
mid = "gray",
high = "blue",
guide = "legend",
breaks = c(-5, 0, 5)
) +
labs(
color = "Avg. Polity 2"
) +
theme(
legend.position = c(.2, .25),
legend.title = element_text(size = 8)
)
model_fit$out
## estimate the model
ibm(
outcome = fat,
mu = ~ log(pop) + maj + dem,
alpha = ~ log(pop) + maj + dem,
theta = ~ log(pop) + maj + dem,
data = wars
) -> model_fit
model_fit$out
library(hexSticker)
library(UCSCXenaTools)
library(tidyverse)
library(actuwar)
p <-
llplot(wars, fat, show_fit = T) +
labs(
x = NULL,
y = NULL
) +
theme_transparent() +
theme(
axis.ticks = element_blank(),
axis.text = element_blank()
)
p
sticker(
p,
package = "actuwar",
p_size = 20,
p_fontface = "bold",
s_x = 1,
s_y=1,
s_width=1.5,
s_height = 1.5,
p_x = 1,
p_y = 1,
p_color = "red3",
h_fill = "white",
h_color = "red3",
url = "https://github.com/milesdwilliams15/odadata",
filename = "inst/logo.png"
)
?sticker
sticker(
p,
package = "actuwar",
p_size = 20,
p_fontface = "bold",
s_x = 1,
s_y = 1,
s_width=1.5,
s_height = 1.5,
p_x = 1,
p_y = .5,
p_color = "red3",
h_fill = "white",
h_color = "red3",
url = "https://github.com/milesdwilliams15/actuwar",
filename = "inst/logo.png"
)
p <-
llplot(wars, fat, show_fit = T) +
labs(
x = NULL,
y = NULL
) +
theme_bw() +
theme(
axis.ticks = element_blank(),
axis.text = element_blank()
)
sticker(
p,
package = "actuwar",
p_size = 20,
p_fontface = "bold",
s_x = 1,
s_y = 1,
s_width=1.5,
s_height = 1.5,
p_x = 1,
p_y = .5,
p_color = "red3",
h_fill = "white",
h_color = "red3",
url = "https://github.com/milesdwilliams15/actuwar",
filename = "inst/logo.png"
)
p <-
llplot(wars, fat, show_fit = T) +
labs(
x = NULL,
y = NULL
) +
theme_transparent() +
theme(
axis.ticks = element_blank(),
axis.text = element_blank(),
panel.grid = element_line(color = "gray")
)
sticker(
p,
package = "actuwar",
p_size = 20,
p_fontface = "bold",
s_x = 1,
s_y = 1,
s_width=1.5,
s_height = 1.5,
p_x = 1,
p_y = .5,
p_color = "red3",
h_fill = "white",
h_color = "red3",
url = "https://github.com/milesdwilliams15/actuwar",
filename = "inst/logo.png"
)
p <-
llplot(wars, fat, show_fit = T) +
labs(
x = NULL,
y = NULL
) +
theme_transparent() +
theme(
axis.ticks = element_blank(),
axis.text = element_blank(),
panel.grid.major = element_line(color = "gray")
)
sticker(
p,
package = "actuwar",
p_size = 20,
p_fontface = "bold",
s_x = 1,
s_y = 1,
s_width=1.5,
s_height = 1.5,
p_x = 1,
p_y = .5,
p_color = "red3",
h_fill = "white",
h_color = "red3",
url = "https://github.com/milesdwilliams15/actuwar",
filename = "inst/logo.png"
)
sticker(
p,
package = "actuwar",
p_size = 24,
p_fontface = "bold",
s_x = 1,
s_y = 1,
s_width=1.5,
s_height = 1.5,
p_x = 1,
p_y = .5,
p_color = "red3",
h_fill = "white",
h_color = "red3",
url = "https://github.com/milesdwilliams15/actuwar",
filename = "inst/logo.png"
)
sticker(
p,
package = "actuwar",
p_size = 24,
p_fontface = "bold",
s_x = 1,
s_y = 1,
s_width=1.5,
s_height = 1.5,
spotlight = T,
p_x = 1,
p_y = .5,
p_color = "red3",
h_fill = "white",
h_color = "red3",
url = "https://github.com/milesdwilliams15/actuwar",
filename = "inst/logo.png"
)
sticker(
p,
package = "actuwar",
p_size = 24,
p_fontface = "bold",
s_x = 1,
s_y = 1,
s_width=1.5,
s_height = 1.5,
spotlight = T,
p_x = 1,
p_y = .5,
l_x = 1,
l_y = .5,
l_width = 30,
l_height = 5,
p_color = "red3",
h_fill = "white",
h_color = "red3",
url = "https://github.com/milesdwilliams15/actuwar",
filename = "inst/logo.png"
)
?rlang::sym
